<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Alien.js â€” Progress</title>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Mono">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <div id="root"></div>
    <script type="module">import{Events,Interface,Stage,clearTween,ticker,tween}from"../build/alien.js";class Config{}Config.BG_COLOR="#0e0e0e",Config.UI_COLOR="rgba(255, 255, 255, 0.94)";class Progress extends Interface{constructor(){super(null,"svg"),this.onUpdate=()=>{this.needsUpdate&&this.update()},this.onProgress=({progress:e})=>{clearTween(this),this.needsUpdate=!0,tween(this,{progress:e},500,"easeOutCubic",()=>{this.needsUpdate=!1,this.progress>=1&&this.onComplete()})},this.onComplete=()=>{this.removeListeners(),this.events.emit(Events.COMPLETE)},this.update=()=>{this.circle.line(this.progress)},this.animateOut=e=>{this.tween({scale:.9,opacity:0},400,"easeInCubic",e)},this.destroy=()=>(this.removeListeners(),clearTween(this),super.destroy());this.width=90,this.height=90,this.x=45,this.y=45,this.radius=36,this.progress=0,this.needsUpdate=!1,this.initSVG(),this.addListeners()}initSVG(){this.attr({width:this.width,height:this.height}),this.circle=new Interface(null,"svg","circle"),this.circle.attr({cx:this.x,cy:this.y,r:this.radius}),this.circle.css({fill:"none",stroke:Config.UI_COLOR,strokeWidth:1.5}),this.circle.start=0,this.circle.offset=-.25,this.add(this.circle)}addListeners(){ticker.add(this.onUpdate)}removeListeners(){ticker.remove(this.onUpdate)}}class App{static init(){this.initView(),this.addListeners()}static initView(){this.view=new Progress,this.view.css({left:"50%",top:"50%",marginLeft:-this.view.width/2,marginTop:-this.view.height/2,cursor:"pointer"}),Stage.add(this.view),this.view.onProgress({progress:1})}static addListeners(){this.view.element.addEventListener("click",this.onClick)}}App.onClick=()=>{App.view.element.removeEventListener("click",App.onClick),App.view.animateOut(()=>{App.view=App.view.destroy()})},App.init();</script>
</body>
</html>
